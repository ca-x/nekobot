import{e as h,b as i,t as s,a as o,j as a,d as x}from"./index-DMfSApuS.js";import{u as y,H as k,B as g}from"./button-DVjcoFYi.js";import{C as N,d as v}from"./card-Bez7NN6a.js";import{S}from"./skeleton-ievwhZCL.js";import{u as b}from"./useMutation-TaRjHYf5.js";const l={all:["marketplace"],skills:()=>[...l.all,"skills"]};function E(){return y({queryKey:l.skills(),queryFn:async()=>{const r=await o.get("/api/marketplace/skills");return Array.isArray(r)?r:[]},staleTime:3e4})}function C(){const r=h();return b({mutationFn:t=>o.post(`/api/marketplace/skills/${encodeURIComponent(t)}/enable`,{}),onSuccess:()=>{r.invalidateQueries({queryKey:l.skills()}),i.success(s("marketplaceSkillEnabled"))},onError:t=>i.error(t.message)})}function D(){const r=h();return b({mutationFn:t=>o.post(`/api/marketplace/skills/${encodeURIComponent(t)}/disable`,{}),onSuccess:()=>{r.invalidateQueries({queryKey:l.skills()}),i.success(s("marketplaceSkillDisabled"))},onError:t=>i.error(t.message)})}function F(){const{data:r,isLoading:t}=E(),c=C(),d=D(),m=r??[],f=e=>{c.mutate(e)},j=e=>{d.mutate(e)};return a.jsxs("div",{children:[a.jsx(k,{title:s("tabMarketplace"),description:s("marketplacePageDescription")}),t&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((e,n)=>a.jsx(S,{className:"h-52 rounded-xl"},n))}),!t&&m.length===0&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[a.jsx("div",{className:"h-14 w-14 flex items-center justify-center rounded-xl bg-muted mb-4",children:a.jsx("span",{className:"text-xl text-muted-foreground",children:"*"})}),a.jsx("h3",{className:"text-sm font-semibold text-foreground mb-1.5",children:s("marketplaceEmptyTitle")}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:s("marketplaceEmptyDescription")})]}),!t&&m.length>0&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>{const n=c.isPending&&c.variables===e.id,p=d.isPending&&d.variables===e.id,u=n||p;return a.jsx(N,{children:a.jsxs(v,{className:"p-5 space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:e.name||e.id}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.id})]}),a.jsxs("span",{className:x("inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-xs font-medium shrink-0",e.enabled?"bg-emerald-50 text-emerald-700 dark:bg-emerald-950 dark:text-emerald-300":"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400"),children:[a.jsx("span",{className:x("h-1.5 w-1.5 rounded-full",e.enabled?"bg-emerald-500":"bg-gray-400")}),e.enabled?s("on"):s("off")]})]}),a.jsx("p",{className:"text-sm text-muted-foreground min-h-[2.5rem]",children:e.description||s("marketplaceNoDescription")}),a.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[a.jsxs("div",{children:[s("marketplaceVersion"),": ",e.version||"-"]}),a.jsxs("div",{children:[s("marketplaceAuthor"),": ",e.author||"-"]}),a.jsxs("div",{children:[s("marketplaceTags"),":"," ",e.tags&&e.tags.length>0?e.tags.join(", "):"-"]}),a.jsxs("div",{className:"truncate",title:e.file_path||"",children:[s("marketplaceFilePath"),": ",e.file_path||"-"]})]}),a.jsx("div",{className:"flex items-center gap-2 pt-1",children:e.enabled?a.jsx(g,{size:"sm",variant:"outline",disabled:u||e.always,onClick:()=>j(e.id),children:p?s("marketplaceDisabling"):s("marketplaceDisable")}):a.jsx(g,{size:"sm",disabled:u||e.always,onClick:()=>f(e.id),children:n?s("marketplaceEnabling"):s("marketplaceEnable")})})]})},e.id)})})]})}export{F as default};
